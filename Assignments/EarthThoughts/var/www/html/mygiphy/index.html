<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="favicon.ico">

    <title>Cover Template for Bootstrap</title>

    <!-- Bootstrap core CSS -->
    <link href="./css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="./css/cover.css" rel="stylesheet">
</head>

<body>

    <div class="site-wrapper">

        <div class="site-wrapper-inner">

            <div class="cover-container">

                <div class="masthead clearfix">
                    <div class="inner">
                        <h3 class="masthead-brand">Cover</h3>
                        <nav class="nav nav-masthead">
                            <a class="nav-link active" href="#">Home</a>
                            <a class="nav-link" href="#">Features</a>
                            <a class="nav-link" href="#">Contact</a>
                        </nav>
                    </div>
                </div>

                <div class="inner cover">
                    <h1 class="cover-heading">Cover your page.</h1>
                    <p class="lead" id="show_giphy">Cover is a one-page template for building simple and beautiful home pages. Download, edit the text, and add your own fullscreen background photo to make it your own.</p>
					<FORM>
						<INPUT TYPE="button" class="btn btn-lg btn-secondary" onClick="window.history.go(0)" VALUE="Get Another">
					</FORM>
					<br>
					
                    <p>
                        <input type="text" id="keyword" style="color:black">
                        <a href="#" class="btn btn-lg btn-secondary" id="search_giphy">Search My Giphy</a>
                    </p>
                </div>

            </div>

        </div>

    </div>

    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="./js/jquery-3.2.1.min.js"></script>

    <script src="./js/tether.min.js"></script>
    <script src="./js/bootstrap.min.js"></script>
    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <script src="../../assets/js/ie10-viewport-bug-workaround.js"></script>
    <script>
        $(function() {
            var settings = {
                "async": true,
                "crossDomain": true,
                "url": "https://cors-anywhere.herokuapp.com/http://api.giphy.com/v1/gifs/random?api_key=8b0c0c39b43c48c28c61a37b0e1081ee",
                "method": "GET",
                "headers": {
                    "cache-control": "no-cache"
                }
            }

            $.ajax(settings).done(function(response) {
                console.log(response);
				//json_data = JSON.parse(response) data is already parsed
                json_data = response
                console.log(json_data)
                img = "<img src=" + json_data.data.image_original_url + ">";
                $("#show_giphy").html(img)
            });

            $("#search_giphy").click(function() {
                keyword = $('#keyword').val()
                console.log(keyword);
                // $.get("http://localhost:5050/get_search?keyword=" + keyword, function(data) {
                //     console.log(data.text)
                //     $('#thought').html("<span style='background-color:rgba(0, 0, 0, 0.3);'>" + data.text + "</span>");
                // });
                var settings = {
                    "async": true,
                    "crossDomain": true,
                    "url": "https://cors-anywhere.herokuapp.com/http://api.giphy.com/v1/gifs/search?api_key=8b0c0c39b43c48c28c61a37b0e1081ee&q=" + keyword,
                    "method": "GET",
                    "headers": {
                        "cache-control": "no-cache"
                    }
                }
                $.ajax(settings).done(function(response) {
                    console.log(response);
                    //json_data = JSON.parse(response) data is already parsed
					json_data = response
					var count = Object.keys(response).length;
					random = Math.floor(Math.random() * (count - 0 + 1)) + 0;
					console.log(count);
					
                    console.log(json_data.data[random].images.original.url)
					img = "<img src=" + json_data.data[random].images.original.url +">";
					$("#show_giphy").html(img)
                });
            });
        });
    </script>
</body>

</html>